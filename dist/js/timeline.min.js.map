{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","winWidth","window","innerWidth","winHeight","innerHeight","forceVerticalMode","resizeTimer","currentIndex","defaultValue","type","acceptedValues","moveItems","startIndex","verticalTrigger","itemWrap","el","wrapper","classes","classList","add","parentNode","insertBefore","appendChild","isElementInViewport","triggerPosition","rect","getBoundingClientRect","windowHeight","document","documentElement","clientHeight","defaultTrigger","defaultSettings","match","triggerUnit","value","console","triggerValue","warn","trigger","parseInt","left","clientWidth","addTransforms","transform","style","webkitTransform","msTransform","tl","timelineEl","removeChild","topPosition","items","offsetLeft","horizontalDivider","setUpHorinzontalTimeline","navArrows","arrowPrev","arrowNext","position","str","disabled","item","settings","itemWidth","wrap","offsetWidth","visibleItems","forEach","length","scrollerWidth","scroller","width","height","evenIndexTallest","oddIndexTallest","i","horizontalStartPosition","setHeights","timelinePosition","prevArrow","createElement","setWidths","nextArrow","className","textContent","top","addNavigation","divider","querySelector","addHorizontalDivider","querySelectorAll","arrow","addEventListener","e","preventDefault","this","contains","maxIndex","removeAttribute","remove","opacity","call","resetTimelines","setUpTimelines","setHeightandWidths","lastVisibleIndex","setUpVerticalTimeline","verticalStartPosition","push","timelineName","id","errorPart","data","createTimelines","Error","slice","children","message","Object","keys","key","settingName","testValues","indexOf","triggerArray","_triggerArray","_slicedToArray","triggerValid","_defaultTrigger2","unit","setTimeout","newWinWidth","newWinHeight","jQuery"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let winWidth = window.innerWidth;\r\n  let winHeight = window.innerHeight;\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    forceVerticalMode: {\r\n      type: 'integer',\r\n      defaultValue: 600\r\n    },\r\n    horizontalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['bottom', 'top'],\r\n      defaultValue: 'top'\r\n    },\r\n    mode: {\r\n      type: 'string',\r\n      acceptedValues: ['horizontal', 'vertical'],\r\n      defaultValue: 'vertical'\r\n    },\r\n    moveItems: {\r\n      type: 'integer',\r\n      defaultValue: 1\r\n    },\r\n    startIndex: {\r\n      type: 'integer',\r\n      defaultValue: 0\r\n    },\r\n    verticalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['left', 'right'],\r\n      defaultValue: 'left'\r\n    },\r\n    verticalTrigger: {\r\n      type: 'string',\r\n      defaultValue: '15%'\r\n    },\r\n    visibleItems: {\r\n      type: 'integer',\r\n      defaultValue: 3\r\n    }\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} The value \"${value}\" entered for the setting \"${settingName}\" is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is partially in the viewport\r\n  function isElementInViewport(el, triggerPosition) {\r\n    const rect = el.getBoundingClientRect();\r\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let triggerUnit = triggerPosition.unit;\r\n    let triggerValue = triggerPosition.value;\r\n    let trigger = windowHeight;\r\n    if (triggerUnit === 'px' && triggerValue >= windowHeight) {\r\n      console.warn('The value entered for the setting \"verticalTrigger\" is larger than the window height. The default value will be used instead.');\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n    if (triggerUnit === 'px') {\r\n      trigger = parseInt(trigger - triggerValue, 10);\r\n    } else if (triggerUnit === '%') {\r\n      trigger = parseInt(trigger * ((100 - triggerValue) / 100), 10);\r\n    }\r\n    return (\r\n      rect.top <= trigger &&\r\n      rect.left <= (window.innerWidth || document.documentElement.clientWidth) &&\r\n      (rect.top + rect.height) >= 0 &&\r\n      (rect.left + rect.width) >= 0\r\n    );\r\n  }\r\n\r\n  // Helper function to add transform styles\r\n  function addTransforms(el, transform) {\r\n    el.style.webkitTransform = transform;\r\n    el.style.msTransform = transform;\r\n    el.style.transform = transform;\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    const settings = {};\r\n\r\n    // Test for correct HTML structure\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel} .timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel} .timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    // Test setting input values\r\n    Object.keys(defaultSettings).forEach((key) => {\r\n      settings[key] = defaultSettings[key].defaultValue;\r\n\r\n      if (data[key]) {\r\n        settings[key] = data[key];\r\n      } else if (options && options[key]) {\r\n        settings[key] = options[key];\r\n      }\r\n\r\n      if (defaultSettings[key].type === 'integer') {\r\n        if (!settings[key] || !testValues(settings[key], key)) {\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      } else if (defaultSettings[key].type === 'string') {\r\n        if (defaultSettings[key].acceptedValues && defaultSettings[key].acceptedValues.indexOf(settings[key]) === -1) {\r\n          console.warn(`${warningLabel} The value \"${settings[key]}\" entered for the setting \"${key}\" was not recognised.`);\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Further specific testing of input values\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    const triggerArray = settings.verticalTrigger.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let [, triggerValue, triggerUnit] = triggerArray;\r\n    let triggerValid = true;\r\n    if (!triggerValue) {\r\n      console.warn(`${warningLabel} No numercial value entered for the 'verticalTrigger' setting.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit !== 'px' && triggerUnit !== '%') {\r\n      console.warn(`${warningLabel} The setting 'verticalTrigger' must be a percentage or pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit === '%' && (triggerValue > 100 || triggerValue < 0)) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`);\r\n      triggerValid = false;\r\n    } else if (triggerUnit === 'px' && triggerValue < 0) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n\r\n    if (triggerValid === false) {\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n\r\n    settings.verticalTrigger = {\r\n      unit: triggerUnit,\r\n      value: triggerValue\r\n    };\r\n\r\n    if (settings.moveItems > settings.visibleItems) {\r\n      console.warn(`${warningLabel} The value of \"moveItems\" (${settings.moveItems}) is larger than the number of \"visibleItems\" (${settings.visibleItems}). The value of \"visibleItems\" has been used instead.`);\r\n      settings.moveItems = settings.visibleItems;\r\n    }\r\n\r\n    if (settings.startIndex >= (items.length - settings.visibleItems)) {\r\n      console.warn(`${warningLabel} The 'startIndex' setting must be between 0 and ${items.length - settings.visibleItems} for this timeline. The value of ${items.length - settings.visibleItems} has been used instead.`);\r\n      settings.startIndex = items.length - settings.visibleItems;\r\n    } else if (settings.startIndex < 0) {\r\n      console.warn(`${warningLabel} The 'startIndex' setting must be between 0 and ${items.length - settings.visibleItems} for this timeline. The value of 0 has been used instead.`);\r\n      settings.startIndex = 0;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      items,\r\n      settings\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.settings.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n\r\n      const transformString = `translateY(${evenIndexTallest}px)`;\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition === 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            addTransforms(item, transformString);\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition !== 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            addTransforms(item, transformString);\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.settings.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.settings.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    const divider = tl.timelineEl.querySelector('.timeline-divider');\r\n    if (divider) {\r\n      tl.timelineEl.removeChild(divider);\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    addTransforms(tl.scroller, str);\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.settings.visibleItems;\r\n    const moveItems = parseInt(tl.settings.moveItems, 10);\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += moveItems) : (currentIndex -= moveItems);\r\n        if (currentIndex === 0 || currentIndex < 0) {\r\n          currentIndex = 0;\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex || currentIndex > maxIndex) {\r\n          currentIndex = maxIndex;\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    currentIndex = tl.settings.startIndex;\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item, tl.settings.verticalTrigger) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.settings.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item, tl.settings.verticalTrigger)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.settings.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.settings.mode === 'horizontal' && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      const newWinWidth = window.innerWidth;\r\n      const newWinHeight = window.innerHeight;\r\n      if (newWinWidth !== winWidth || newWinHeight !== winHeight) {\r\n        setUpTimelines();\r\n        winWidth = newWinWidth;\r\n        winHeight = newWinHeight;\r\n      }\r\n    }, 250);\r\n  });\r\n}\r\n\r\n// Register as a jQuery plugin if the jQuery library is present\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}