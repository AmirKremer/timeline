{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","defaultSettings","mode","forceVerticalMode","testValues","value","settingName","console","itemWrap","el","wrapper","classes","classList","add","parentNode","isElementInViewport","rect","getBoundingClientRect","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","position","currentIndex","scroller","str","offsetLeft","tl","style","msTransform","transform","timelineEl","evenIndexTallest","items","arrowPrev","arrowNext","maxIndex","forEach","setHeightandWidths","setWidths","wrap","offsetWidth","visibleItems","item","width","itemWidth","scrollerWidth","length","height","i","offsetHeight","oddIndexTallest","addNavigation","prevArrow","createElement","nextArrow","topPosition","className","textContent","top","disabled","appendChild","addHorizontalDivider","querySelector","remove","horizontalDivider","slideTimeline","navArrows","arrow","addEventListener","e","preventDefault","contains","timelinePosition","wrapElements","removeAttribute","querySelectorAll","removeChild","resetTimelines","setUpHorinzontalTimeline","lastVisibleIndex","divider","setUpVerticalTimeline","setTimeout","opacity","call","dataset","id","verticalStartPosition","data","warn","Error","errorPart","timelineName","slice","children","message","setUpTimelines","clearTimeout","resizeTimer","jQuery","opts","this"],"mappings":";;;;;;aAAA,SAASA,SAASC,EAAYC,GAC5B,IAAMC,EAAY,GADpBC,EAAkBH,YACVE,OAAAA,EACAC,EAAe,EAKfC,EAAkB,CADxBC,KAAA,WACAC,kBAAMF,IACJC,sBADsB,OAEtBC,aAAAA,GAMF,SAASC,EAAWC,EAAOC,GAD3B,MAAA,iBAAAD,GAAAA,EAAA,GAAA,IACAE,QAASH,KAAWC,EAApB,qBAAwCA,EAAxC,SAAwCC,EAAxC,wBACM,GAQN,SAASE,EAASC,EAAIC,EAASC,GAD/BD,EAAAE,UAAAC,IAAAF,GACAF,EAAAK,WAASN,aAATE,EAAAD,GACEC,EAAQE,YAAUC,GAcpB,SAASE,EAAoBN,GAD7B,IAAAO,EAAAP,EAAAQ,wBACA,OACkBA,GAAhBD,EAAMA,KAEJ,GADFA,EACEA,MAKHA,EAAAE,SAAA,IAAAC,OAAAC,aAAA,IAAAC,SAAAC,gBAAAC,eAFGP,EAAKQ,QAAUL,OAAOM,YAAcJ,SAASC,gBAAgBI,aAqK/D,SAAMC,EAAoBC,GAC1B,IACGC,EAAAA,gBADGC,EAAAA,MAAAA,GAAAC,WACHF,YACHG,EAAGH,SAASI,MAAMC,gBAAlBJ,EACAE,EAAGH,SAASI,MAAME,YAAYL,EAC/BE,EAAAH,SAAAI,MAAAE,UAAAL,EA6BCE,SAAGI,EAAyBJ,GA9G5B,IAAAA,EAaMK,EACDC,EAuEgBF,EACfG,EACAC,EACAC,EACHC,EAsBHC,EAAAA,WAAAA,UAAA9B,IAAA,wBA/GAmB,EAgHAA,EA7EEY,OAAAA,WAAAA,EAAAA,oBAhCAZ,EAAGM,UAAMI,EAAQG,KAAAC,YAAUd,EAAAe,aACzBC,EAAAA,MAAKf,QAAMgB,SAAXD,GADFA,EAAAf,MAAAgB,MAAAjB,EAAAkB,UAAA,OAIAlB,EAAGH,cAAeoB,EAAAA,UAAcE,EAAAA,MAAhCC,OACDpB,EAAAH,SAAAI,MAAAgB,MAAAjB,EAAAmB,cAAA,KAMIb,EADCD,EAAAA,EAEFW,EAAAA,MAAKf,QAAMoB,SAAAA,EAASC,GACpBN,EAAMK,MAAAA,OAAcE,OACpB,IAAID,EAAJN,EAAiBO,aACflB,EAAAA,GAAAA,EADFA,EAEOA,EAAAgB,EAAAA,EAAAhB,EAENmB,EAAAA,EAAAH,EAAAA,EAAAG,IAGDxB,EAAAM,MAAIgB,QAAJ,SAAAN,EAAiBM,GACfN,EAAKf,GAAMoB,EADbL,EAEOf,MAAAoB,OAAAhB,EAFP,MAIEW,EAAKf,MAAME,OAAXqB,EAAAR,KACDA,EAAAf,MAAAE,UAAA,cAAAE,EAAA,SAGJL,EAAAH,SAAAI,MAAAoB,OAAAhB,EAAAmB,EAAA,MAiFDC,EAAAzB,GAvEA,SAAIA,GACF,GAAAA,EAAM0B,MAAAA,OAAYrC,EAAAA,aAASsC,CAC3B,IAAMC,EAAYvC,SAASsC,cAAc,UACnCE,EAAc7B,SAAS2B,cAAGJ,UAChCG,EAAA1B,EAAsBM,MAAA,GAAAiB,aACtBK,EAAUE,UAAY,gDACtBJ,EAAUK,UAAV,gDACAH,EAAUG,YAAc,WACxBL,EAAUzB,YAAe4B,OACzBD,EAAU3B,MAAM+B,IAASH,EAAzBD,KACAA,EAAIhC,MAAAA,IAAoBiC,EAAxB,KACE,IAAAH,EADFA,EAEW9B,UAAAA,EACTgC,EAAqB,IAArB5B,EAAAM,MAAAc,SACDQ,EAAAK,UAAA,GAEDjC,EAAGI,WAAW8B,YAAYN,GAC3B5B,EAAAI,WAAA8B,YAAAN,IAuDDO,CAAAA,GAlDA,SAAkBC,GAChBpC,EAAGI,WAAWgC,cAAc,sBAC7BpC,EAAAI,WAAAgC,cAAA,qBAAAC,SAED,IAAMC,EAAAA,EAAAA,MAAoBjD,GAAAA,aAC1BiD,EAAkBR,SAAYH,cAA9B,QACAW,EAAkBrC,UAAe4B,mBACjC7B,EAAckC,MAAAA,IAAYI,EAA1BtC,KACDA,EAAAI,WAAA8B,YAAAI,GA2CCC,CAAAvC,GA7BMO,GADeH,EA+BtBJ,GA9BsBI,WAAWgC,iBAAc,wBACxC5B,EAAYR,EAAGI,WAAWgC,cAAc,8BACxC3B,EAAcH,EAAAA,WAAH8B,cAAqBrB,8BACnCL,EAAa8B,EAAAA,MAAhBpB,OAA2BpB,EAACyC,aAC1BA,GAAAA,QAAMC,KAAAA,EAAiB,SAAAD,GACrBE,EAAEC,iBAAF,QAAA,SAAAD,GACA/C,EAAAA,iBAEE,KADFA,EAAIA,KAAAA,UAAoBiD,SAAA,6BAAAjD,GAAA,EAAAA,GAAA,IAEtBY,EAAUyB,UAAW,EAFvBzB,EAGWZ,UAAAA,GACTW,IAAAE,GACAD,EAAUyB,UAAW,EAFhBzB,EAGAyB,UAAA,IAELzB,EAAUyB,UAAW,EACtBzB,EAAAyB,UAAA,GAZHa,EAAA9C,OA2EFjC,SAAAA,IACEiC,EAAGI,QAAWH,SAAAA,GACdD,EAAAI,WAAQA,MAAWxB,QAAUiE,EAC3BE,EAAAA,WAAgBzC,UAAhBuC,SAAA,qBACD7C,EAAAM,MAjRLI,QAAA,SAAAM,GACAxC,EAASuE,EAAAA,cAAoB,sBAAA1D,SAAAsC,cAAA,OAAA,2BAC3BrB,EAAMI,EAAQ0B,cAAU,4BAAA/C,SAAAsC,cAAA,OAAA,2BA4PxB/B,SAAAI,GACAA,EAAcpB,EACdoB,EAAGH,WAASmD,UAAAA,OAAgB,uBAA5B,oBACAhD,EAAGM,SAAMI,gBAASM,SAChBA,EAAAA,MAAKgC,QAAAA,SAAAA,GACLhC,EAAKpC,gBAAL,SAFFoC,EAAApC,UAAAyD,OAAA,WAAA,SAAA,uBAAA,2BAKA,IAAG3B,EAAa8B,EAAAA,WAAWS,iBAAW,wBACpCR,GAAAA,QAAM3D,KAAAA,EAAWoE,SAAAA,GADnBT,EAAA3D,WAAAoE,YAAAT,KAaEU,CAAW1D,GACTO,OAAGI,YAAHJ,EAAwBnB,mBACzBmB,EAAAI,WAAAxB,UAAAC,IAAA,oBAECuE,eAAAA,EAAAA,MAAAjE,OAAAM,WAAAO,EAAA7B,kBADFiF,EAEOpD,GAxDT,SAAAA,GACAA,IAAGM,EAAc,EACfU,EAAAA,MAAKpC,QAAUyD,SAAAA,EAAOf,GACtBN,EAAKjC,UAAAA,OAAAA,WAA6BuC,WAChCN,EAAmBA,IAAnB,EAAAM,EADFN,EAEOpC,UAAAC,IAAA,YAENwE,EAAA/B,EAGCN,EAAKpC,IADsCX,SAA/BqF,EAAAA,sBAA+BrF,EAAAA,IACxBkB,OAAAM,WAAnBxB,EAAAE,kBADF6C,EAEOpC,UAAAC,IAAA,yBAENmC,EAAApC,UAAAC,IAAA,0BAGDmB,IAAGM,IAAAA,EAAH,EAAY1B,EAAAA,EAAiB0C,GAAY,EAC1CtB,EAAAM,MAAAgB,GAAA1C,UAAAyD,OAAA,WAAA,UAGCrC,OAAGM,iBAAc,SAAA,WACfN,EAAAM,MAAIvB,QAAAA,SAAAA,GACFiC,EAAmBA,IACpBA,EAAApC,UAAAC,IAAA,cAmCF0E,CAAAvD,GAEDwD,EAAAA,WAAW5E,UAAMC,IAAA,oBACfmB,WAAGI,WADLJ,EAEGI,WAFHH,MAAAwD,QAAA,GAfF,OA1KA5F,EAAW6F,QACZ,GAAAhD,QAAAgD,KAAA7F,EA7EC,SAAwB8F,GACxB,IAAI9C,EAAJT,EAAAwD,GAAA,IAAAxD,EAAAwD,GAAA,IAAAxD,EAAA0B,UACIjC,EAAAA,+CACAS,EAAAA,EAAJqD,QAEEzF,OAAAA,EAAM2F,OAAAA,EAAuB1F,OAAAA,EAA7BD,EAEE4F,EAFF5F,KAAM2F,EAEJC,EAFID,sBAAuB1F,EAE3B2F,EAF2B3F,kBAAmB4C,EAE9C+C,EAF8C/C,aAG7C7C,EAAS4F,KADd5F,EAEWJ,EAFXI,KAGcJ,GADsBA,EAAAI,OAEnCA,EAAAJ,EAAAI,MAEI2F,EAAAA,sBADLA,EAE8BA,EAF9BA,sBAGKA,GAAAA,EAA0B/F,wBAC9B+F,EAAA/F,EAAA+F,uBAEI1F,EAAAA,kBADLA,EAEsBL,EAFtBK,kBAGKA,GAAsBL,EAAtBK,oBACJA,EAAAL,EAAAK,mBAEI4C,EAAAA,aADLA,EAEsBjD,EAFtBiD,aAGKA,GAAiBjD,EAAjBiD,eACJA,EAAAjD,EAAAiD,cAGSgD,eAARxF,GAAA,aAAAL,IACGA,QAASD,KAAAA,EAATC,aAF6CA,EAE7CA,wBACJA,EAAAD,EAAAC,MAGC,SAAAK,GAAmDsF,UAAnDA,IACGA,QAAAA,KAAAA,EAAAA,uBAAAA,EAAAA,wBACJA,EAAA5F,EAAA4F,uBAGI1F,GAAsBF,EAAtBE,EAD4E,yBAEhFA,EAAAF,EAAAE,mBAGI4C,GAAiB9C,EAAjB8C,EAD6D,oBAEjEA,EAAA9C,EAAA8C,cAGCF,IAEE,KADFA,EAAKA,EAAMuB,cAAA,oBAAX,MAEO,IAAA4B,MAAAhG,EAAA,mBAAAiG,EAAA,IAAAC,GAGH,KADFrE,EAAKA,EAAUuC,cAAA,qBAAf,MAEO,IAAA4B,MAAAhG,EAAA,oBAAAiG,EAAA,oBAEN3D,EAAA,GAAA6D,MAAAT,KAAA7D,EAAAuE,SAAA,GAGH7F,MAAAA,GAED,OADCA,QAAOwF,KAAPpB,EAAA0B,UACD,EAGCjE,EAAAA,KAAAA,CACAS,WAAAA,EACAhB,KAAAA,EACA3B,SAAAA,EACA2F,KAAAA,EACAvD,sBAAAA,EACAS,MAAAA,EACA5C,aAAAA,EARFA,kBAAAA,MA6MFmG,IAGEC,OAAAA,iBAAaC,SAAb,WACAA,aAAAA,GAFFA,EAAAhB,WAAAc,EAAA,OAOCnF,OAAAsF,SAMFtF,OAAAsF,OAJK7G,GAAAA,SAAA,SAAA8G,GADF,OAEE9G,SAAO+G,KAAPD,GAFFC","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    mode: 'vertical',\r\n    forceVerticalMode: 600,\r\n    verticalStartPosition: 'left',\r\n    visibleItems: 3\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} Supplied number '${value}' for ${settingName} is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is in viewport\r\n  function isElementInViewport(el) {\r\n    const rect = el.getBoundingClientRect();\r\n    return (\r\n      rect.top >= 0 &&\r\n      rect.left >= 0 &&\r\n      rect.bottom <= (window.innerHeight * 1.1 || document.documentElement.clientHeight * 1.1) &&\r\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n    );\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    let {\r\n      mode, verticalStartPosition, forceVerticalMode, visibleItems\r\n    } = defaultSettings;\r\n    if (data.mode) {\r\n      ({ mode } = data);\r\n    } else if (options && options.mode) {\r\n      ({ mode } = options);\r\n    }\r\n    if (data.verticalStartPosition) {\r\n      ({ verticalStartPosition } = data);\r\n    } else if (options && options.verticalStartPosition) {\r\n      ({ verticalStartPosition } = options);\r\n    }\r\n    if (data.forceVerticalMode) {\r\n      ({ forceVerticalMode } = data);\r\n    } else if (options && options.forceVerticalMode) {\r\n      ({ forceVerticalMode } = options);\r\n    }\r\n    if (data.visibleItems) {\r\n      ({ visibleItems } = data);\r\n    } else if (options && options.visibleItems) {\r\n      ({ visibleItems } = options);\r\n    }\r\n\r\n    if (mode !== 'horizontal' && mode !== 'vertical') {\r\n      console.warn(`${warningLabel}The mode '${mode}' was not recognised`);\r\n      ({ mode } = defaultSettings);\r\n    }\r\n\r\n    if (verticalStartPosition !== 'left' && verticalStartPosition !== 'right') {\r\n      console.warn(`${warningLabel}The start position '${verticalStartPosition}' was not recognised`);\r\n      ({ verticalStartPosition } = defaultSettings);\r\n    }\r\n\r\n    if (!forceVerticalMode || !testValues(forceVerticalMode, \"'forceVerticalMode'\")) {\r\n      ({ forceVerticalMode } = defaultSettings);\r\n    }\r\n\r\n    if (!visibleItems || !testValues(visibleItems, \"'visibleItems'\")) {\r\n      ({ visibleItems } = defaultSettings);\r\n    }\r\n\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel}.timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel}.timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      mode,\r\n      verticalStartPosition,\r\n      items,\r\n      visibleItems,\r\n      forceVerticalMode\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    if (tl.timelineEl.querySelector('.timeline-divider')) {\r\n      tl.timelineEl.querySelector('.timeline-divider').remove();\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    tl.scroller.style.webkitTransform = str;\r\n    tl.scroller.style.msTransform = str;\r\n    tl.scroller.style.transform = str;\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.visibleItems;\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += 1) : (currentIndex -= 1);\r\n        if (currentIndex === 0) {\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex) {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > defaultSettings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    currentIndex = 0;\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.mode === 'horizontal' && window.innerWidth > tl.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(setUpTimelines, 250);\r\n  });\r\n}\r\n\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}