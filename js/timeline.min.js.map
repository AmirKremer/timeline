{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","innerWidth","winWidth","window","defaultSettings","forceVerticalMode","defaultValue","type","horizontalStartPosition","mode","moveItems","verticalStartPosition","verticalTrigger","visibleItems","itemWrap","el","wrapper","classes","classList","add","parentNode","isElementInViewport","triggerPosition","rect","getBoundingClientRect","triggerUnit","value","document","documentElement","clientHeight","triggerValue","trigger","windowHeight","parseInt","top","left","clientWidth","height","width","position","currentIndex","scroller","str","offsetLeft","tl","style","msTransform","transform","timelineEl","evenIndexTallest","items","arrowPrev","arrowNext","maxIndex","forEach","setHeightandWidths","setWidths","wrap","offsetWidth","settings","item","itemWidth","scrollerWidth","length","i","offsetHeight","oddIndexTallest","addNavigation","prevArrow","createElement","nextArrow","topPosition","className","textContent","disabled","appendChild","addHorizontalDivider","querySelector","remove","horizontalDivider","slideTimeline","navArrows","arrow","addEventListener","e","preventDefault","timelinePosition","contains","wrapElements","removeAttribute","querySelectorAll","removeChild","resetTimelines","setUpHorinzontalTimeline","lastVisibleIndex","divider","setUpVerticalTimeline","setTimeout","opacity","call","dataset","id","errorPart","timelineName","Error","slice","children","console","warn","message","Object","data","key","settingName","testValues","acceptedValues","indexOf","triggerArray","triggerValid","match","_defaultSettings$vert","unit","setUpTimelines","clearTimeout","resizeTimer","newWinWidth","jQuery","opts","this"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let winWidth = window.innerWidth;\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    forceVerticalMode: {\r\n      type: 'integer',\r\n      defaultValue: 600\r\n    },\r\n    horizontalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['bottom', 'top'],\r\n      defaultValue: 'top'\r\n    },\r\n    mode: {\r\n      type: 'string',\r\n      acceptedValues: ['horizontal', 'vertical'],\r\n      defaultValue: 'vertical'\r\n    },\r\n    moveItems: {\r\n      type: 'integer',\r\n      defaultValue: 1\r\n    },\r\n    verticalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['left', 'right'],\r\n      defaultValue: 'left'\r\n    },\r\n    verticalTrigger: {\r\n      type: 'string',\r\n      defaultValue: {\r\n        unit: '%',\r\n        value: '15'\r\n      }\r\n    },\r\n    visibleItems: {\r\n      type: 'integer',\r\n      defaultValue: 3\r\n    }\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} The value \"${value}\" entered for the setting \"${settingName}\" is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is partially in the viewport\r\n  function isElementInViewport(el, triggerPosition) {\r\n    const rect = el.getBoundingClientRect();\r\n    const triggerUnit = triggerPosition.unit;\r\n    const triggerValue = triggerPosition.value;\r\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    let trigger = windowHeight;\r\n    if (triggerUnit === 'px') {\r\n      if (triggerValue >= windowHeight) {\r\n        console.warn('The value entered for the setting \"verticalTrigger\" is larger than the window height. The default value will be used instead.');\r\n        trigger = parseInt(trigger * ((100 - defaultSettings.verticalTrigger.defaultValue.value) / 100), 10);\r\n      } else {\r\n        trigger = parseInt(trigger - triggerValue, 10);\r\n      }\r\n    } else if (triggerUnit === '%') {\r\n      trigger = parseInt(trigger * ((100 - triggerValue) / 100), 10);\r\n    }\r\n    return (\r\n      rect.top <= trigger &&\r\n      rect.left <= (window.innerWidth || document.documentElement.clientWidth) &&\r\n      (rect.top + rect.height) >= 0 &&\r\n      (rect.left + rect.width) >= 0\r\n    );\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    const settings = {};\r\n\r\n    // Test for correct HTML structure\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel} .timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel} .timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    // Test setting input values\r\n    Object.keys(defaultSettings).forEach((key) => {\r\n      settings[key] = defaultSettings[key].defaultValue;\r\n\r\n      if (data[key]) {\r\n        settings[key] = data[key];\r\n      } else if (options && options[key]) {\r\n        settings[key] = options[key];\r\n      }\r\n\r\n      if (defaultSettings[key].type === 'integer') {\r\n        if (!settings[key] || !testValues(settings[key], key)) {\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      } else if (defaultSettings[key].type === 'string') {\r\n        if (defaultSettings[key].acceptedValues && defaultSettings[key].acceptedValues.indexOf(settings[key]) === -1) {\r\n          console.warn(`${warningLabel} The value \"${settings[key]}\" entered for the setting \"${key}\" was not recognised.`);\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Further specific testing of input values\r\n    if (settings.verticalTrigger) {\r\n      const triggerArray = settings.verticalTrigger.match(/(\\d*\\.?\\d*)(.*)/);\r\n      let triggerValue = triggerArray[1];\r\n      let triggerUnit = triggerArray[2];\r\n      let triggerValid = true;\r\n      if (!triggerValue) {\r\n        console.warn(`${warningLabel} No numercial value entered for the 'verticalTrigger' setting.`);\r\n        triggerValid = false;\r\n      }\r\n      if (triggerUnit !== 'px' && triggerUnit !== '%') {\r\n        console.warn(`${warningLabel} The setting 'verticalTrigger' must be a percentage or pixel value.`);\r\n        triggerValid = false;\r\n      }\r\n      if (triggerUnit === '%' && (triggerValue > 100 || triggerValue < 0)) {\r\n        console.warn(`${warningLabel} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`);\r\n        triggerValid = false;\r\n      } else if (triggerUnit === 'px' && triggerValue < 0) {\r\n        console.warn(`${warningLabel} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`);\r\n        triggerValid = false;\r\n      }\r\n\r\n      if (triggerValid === false) {\r\n        ({ unit: triggerUnit, value: triggerValue } = defaultSettings.verticalTrigger.defaultValue);\r\n      }\r\n\r\n      settings.verticalTrigger = {\r\n        unit: triggerUnit,\r\n        value: triggerValue\r\n      };\r\n    }\r\n\r\n    if (settings.moveItems > settings.visibleItems) {\r\n      console.warn(`${warningLabel} The value of \"moveItems\" (${settings.moveItems}) is larger than the number of \"visibleItems\" (${settings.visibleItems}). The value of \"visibleItems\" has been used instead.`);\r\n      settings.moveItems = settings.visibleItems;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      items,\r\n      settings\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.settings.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition === 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition !== 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.settings.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.settings.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    if (tl.timelineEl.querySelector('.timeline-divider')) {\r\n      tl.timelineEl.querySelector('.timeline-divider').remove();\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    tl.scroller.style.webkitTransform = str;\r\n    tl.scroller.style.msTransform = str;\r\n    tl.scroller.style.transform = str;\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.settings.visibleItems;\r\n    const moveItems = parseInt(tl.settings.moveItems, 10);\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += moveItems) : (currentIndex -= moveItems);\r\n        if (currentIndex === 0 || currentIndex < 0) {\r\n          currentIndex = 0;\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex || currentIndex > maxIndex) {\r\n          currentIndex = maxIndex;\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item, tl.settings.verticalTrigger) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.settings.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item, tl.settings.verticalTrigger)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    currentIndex = 0;\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.settings.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.settings.mode === 'horizontal' && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      const newWinWidth = window.innerWidth;\r\n      if (newWinWidth !== winWidth) {\r\n        setUpTimelines();\r\n        winWidth = newWinWidth;\r\n      }\r\n    }, 250);\r\n  });\r\n}\r\n\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}