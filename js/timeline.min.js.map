{"version":3,"sources":["timeline.js"],"names":["timeline","collection","options","timelines","warningLabel","winWidth","window","innerWidth","resizeTimer","forceVerticalMode","type","defaultValue","acceptedValues","moveItems","verticalTrigger","itemWrap","el","wrapper","classes","classList","add","parentNode","insertBefore","appendChild","isElementInViewport","triggerPosition","rect","getBoundingClientRect","triggerUnit","unit","triggerValue","value","windowHeight","documentElement","clientHeight","trigger","defaultSettings","parseInt","top","document","clientWidth","height","timelinePosition","tl","str","items","currentIndex","offsetLeft","scroller","position","style","webkitTransform","setUpHorinzontalTimeline","oddIndexTallest","evenIndexTallest","navArrows","arrowPrev","arrowNext","timelineEl","settings","itemWidth","wrap","offsetWidth","visibleItems","setWidths","item","width","length","scrollerWidth","i","offsetHeight","forEach","horizontalStartPosition","transform","addNavigation","createElement","prevArrow","nextArrow","topPosition","className","textContent","disabled","setHeightandWidths","querySelector","addHorizontalDivider","remove","horizontalDivider","querySelectorAll","slideTimeline","maxIndex","arrow","addEventListener","contains","setUpTimelines","opacity","resetTimelines","removeAttribute","call","wrapElements","lastVisibleIndex","setUpVerticalTimeline","verticalStartPosition","divider","setTimeout","errorPart","id","data","dataset","Error","timelineName","slice","children","console","warn","e","message","key","settingName","testValues","indexOf","triggerArray","match","triggerValid","_defaultTrigger","_slicedToArray","defaultTrigger","push","clearTimeout","newWinWidth","jQuery","opts","fn","this"],"mappings":"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","file":"timeline.min.js","sourcesContent":["function timeline(collection, options) {\r\n  const timelines = [];\r\n  const warningLabel = 'Timeline:';\r\n  let winWidth = window.innerWidth;\r\n  let resizeTimer;\r\n  let currentIndex = 0;\r\n\r\n  // Set default settings\r\n  const defaultSettings = {\r\n    forceVerticalMode: {\r\n      type: 'integer',\r\n      defaultValue: 600\r\n    },\r\n    horizontalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['bottom', 'top'],\r\n      defaultValue: 'top'\r\n    },\r\n    mode: {\r\n      type: 'string',\r\n      acceptedValues: ['horizontal', 'vertical'],\r\n      defaultValue: 'vertical'\r\n    },\r\n    moveItems: {\r\n      type: 'integer',\r\n      defaultValue: 1\r\n    },\r\n    verticalStartPosition: {\r\n      type: 'string',\r\n      acceptedValues: ['left', 'right'],\r\n      defaultValue: 'left'\r\n    },\r\n    verticalTrigger: {\r\n      type: 'string',\r\n      defaultValue: '15%'\r\n    },\r\n    visibleItems: {\r\n      type: 'integer',\r\n      defaultValue: 3\r\n    }\r\n  };\r\n\r\n  // Helper function to test whether values are an integer\r\n  function testValues(value, settingName) {\r\n    if (typeof value !== 'number' && value % 1 !== 0) {\r\n      console.warn(`${warningLabel} The value \"${value}\" entered for the setting \"${settingName}\" is not an integer.`);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Helper function to wrap an element in another HTML element\r\n  function itemWrap(el, wrapper, classes) {\r\n    wrapper.classList.add(classes);\r\n    el.parentNode.insertBefore(wrapper, el);\r\n    wrapper.appendChild(el);\r\n  }\r\n\r\n  // Helper function to wrap each element in a group with other HTML elements\r\n  function wrapElements(items) {\r\n    items.forEach((item) => {\r\n      itemWrap(item.querySelector('.timeline__content'), document.createElement('div'), 'timeline__content__wrap');\r\n      itemWrap(item.querySelector('.timeline__content__wrap'), document.createElement('div'), 'timeline__item__inner');\r\n    });\r\n  }\r\n\r\n  // Helper function to check if an element is partially in the viewport\r\n  function isElementInViewport(el, triggerPosition) {\r\n    const rect = el.getBoundingClientRect();\r\n    const triggerUnit = triggerPosition.unit;\r\n    const triggerValue = triggerPosition.value;\r\n    const windowHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    let trigger = windowHeight;\r\n    if (triggerUnit === 'px') {\r\n      if (triggerValue >= windowHeight) {\r\n        console.warn('The value entered for the setting \"verticalTrigger\" is larger than the window height. The default value will be used instead.');\r\n        trigger = parseInt(trigger * ((100 - defaultSettings.verticalTrigger.defaultValue.value) / 100), 10);\r\n      } else {\r\n        trigger = parseInt(trigger - triggerValue, 10);\r\n      }\r\n    } else if (triggerUnit === '%') {\r\n      trigger = parseInt(trigger * ((100 - triggerValue) / 100), 10);\r\n    }\r\n    return (\r\n      rect.top <= trigger &&\r\n      rect.left <= (window.innerWidth || document.documentElement.clientWidth) &&\r\n      (rect.top + rect.height) >= 0 &&\r\n      (rect.left + rect.width) >= 0\r\n    );\r\n  }\r\n\r\n  // Create timelines\r\n  function createTimelines(timelineEl) {\r\n    const timelineName = timelineEl.id ? `#${timelineEl.id}` : `.${timelineEl.className}`;\r\n    const errorPart = 'could not be found as a direct descendant of';\r\n    const data = timelineEl.dataset;\r\n    let wrap;\r\n    let scroller;\r\n    let items;\r\n    const settings = {};\r\n\r\n    // Test for correct HTML structure\r\n    try {\r\n      wrap = timelineEl.querySelector('.timeline__wrap');\r\n      if (!wrap) {\r\n        throw new Error(`${warningLabel} .timeline__wrap ${errorPart} ${timelineName}`);\r\n      } else {\r\n        scroller = wrap.querySelector('.timeline__items');\r\n        if (!scroller) {\r\n          throw new Error(`${warningLabel} .timeline__items ${errorPart} .timeline__wrap`);\r\n        } else {\r\n          items = [].slice.call(scroller.children, 0);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e.message);\r\n      return false;\r\n    }\r\n\r\n    // Test setting input values\r\n    Object.keys(defaultSettings).forEach((key) => {\r\n      settings[key] = defaultSettings[key].defaultValue;\r\n\r\n      if (data[key]) {\r\n        settings[key] = data[key];\r\n      } else if (options && options[key]) {\r\n        settings[key] = options[key];\r\n      }\r\n\r\n      if (defaultSettings[key].type === 'integer') {\r\n        if (!settings[key] || !testValues(settings[key], key)) {\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      } else if (defaultSettings[key].type === 'string') {\r\n        if (defaultSettings[key].acceptedValues && defaultSettings[key].acceptedValues.indexOf(settings[key]) === -1) {\r\n          console.warn(`${warningLabel} The value \"${settings[key]}\" entered for the setting \"${key}\" was not recognised.`);\r\n          settings[key] = defaultSettings[key].defaultValue;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Further specific testing of input values\r\n    const defaultTrigger = defaultSettings.verticalTrigger.defaultValue.match(/(\\d*\\.?\\d*)(.*)/);\r\n    const triggerArray = settings.verticalTrigger.match(/(\\d*\\.?\\d*)(.*)/);\r\n    let triggerValue = triggerArray[1];\r\n    let triggerUnit = triggerArray[2];\r\n    let triggerValid = true;\r\n    if (!triggerValue) {\r\n      console.warn(`${warningLabel} No numercial value entered for the 'verticalTrigger' setting.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit !== 'px' && triggerUnit !== '%') {\r\n      console.warn(`${warningLabel} The setting 'verticalTrigger' must be a percentage or pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n    if (triggerUnit === '%' && (triggerValue > 100 || triggerValue < 0)) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be between 0 and 100 if using a percentage value.`);\r\n      triggerValid = false;\r\n    } else if (triggerUnit === 'px' && triggerValue < 0) {\r\n      console.warn(`${warningLabel} The 'verticalTrigger' setting value must be above 0 if using a pixel value.`);\r\n      triggerValid = false;\r\n    }\r\n\r\n    if (triggerValid === false) {\r\n      [, triggerValue, triggerUnit] = defaultTrigger;\r\n    }\r\n\r\n    settings.verticalTrigger = {\r\n      unit: triggerUnit,\r\n      value: triggerValue\r\n    };\r\n\r\n    if (settings.moveItems > settings.visibleItems) {\r\n      console.warn(`${warningLabel} The value of \"moveItems\" (${settings.moveItems}) is larger than the number of \"visibleItems\" (${settings.visibleItems}). The value of \"visibleItems\" has been used instead.`);\r\n      settings.moveItems = settings.visibleItems;\r\n    }\r\n\r\n    timelines.push({\r\n      timelineEl,\r\n      wrap,\r\n      scroller,\r\n      items,\r\n      settings\r\n    });\r\n  }\r\n\r\n  if (collection.length) {\r\n    [].forEach.call(collection, createTimelines);\r\n  }\r\n\r\n  // Set height and widths of timeline elements and viewport\r\n  function setHeightandWidths(tl) {\r\n    // Set widths of items and viewport\r\n    function setWidths() {\r\n      tl.itemWidth = tl.wrap.offsetWidth / tl.settings.visibleItems;\r\n      tl.items.forEach((item) => {\r\n        item.style.width = `${tl.itemWidth}px`;\r\n      });\r\n      tl.scrollerWidth = tl.itemWidth * tl.items.length;\r\n      tl.scroller.style.width = `${tl.scrollerWidth}px`;\r\n    }\r\n\r\n    // Set height of items and viewport\r\n    function setHeights() {\r\n      let oddIndexTallest = 0;\r\n      let evenIndexTallest = 0;\r\n      tl.items.forEach((item, i) => {\r\n        item.style.height = 'auto';\r\n        const height = item.offsetHeight;\r\n        if (i % 2 === 0) {\r\n          evenIndexTallest = height > evenIndexTallest ? height : evenIndexTallest;\r\n        } else {\r\n          oddIndexTallest = height > oddIndexTallest ? height : oddIndexTallest;\r\n        }\r\n      });\r\n      tl.items.forEach((item, i) => {\r\n        if (i % 2 === 0) {\r\n          item.style.height = `${evenIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition === 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        } else {\r\n          item.style.height = `${oddIndexTallest}px`;\r\n          if (tl.settings.horizontalStartPosition !== 'bottom') {\r\n            item.classList.add('timeline__item--bottom');\r\n            item.style.transform = `translateY(${evenIndexTallest}px)`;\r\n          } else {\r\n            item.classList.add('timeline__item--top');\r\n          }\r\n        }\r\n      });\r\n      tl.scroller.style.height = `${evenIndexTallest + oddIndexTallest}px`;\r\n    }\r\n\r\n    if (window.innerWidth > tl.settings.forceVerticalMode) {\r\n      setWidths();\r\n      setHeights();\r\n    }\r\n  }\r\n\r\n  // Create and add arrow controls to horizontal timeline\r\n  function addNavigation(tl) {\r\n    if (tl.items.length > tl.settings.visibleItems) {\r\n      const prevArrow = document.createElement('button');\r\n      const nextArrow = document.createElement('button');\r\n      const topPosition = tl.items[0].offsetHeight;\r\n      prevArrow.className = 'timeline-nav-button timeline-nav-button--prev';\r\n      nextArrow.className = 'timeline-nav-button timeline-nav-button--next';\r\n      prevArrow.textContent = 'Previous';\r\n      nextArrow.textContent = 'Next';\r\n      prevArrow.style.top = `${topPosition}px`;\r\n      nextArrow.style.top = `${topPosition}px`;\r\n      if (currentIndex === 0) {\r\n        prevArrow.disabled = true;\r\n      } else if (currentIndex + 1 === tl.items.length) {\r\n        nextArrow.disabled = true;\r\n      }\r\n      tl.timelineEl.appendChild(prevArrow);\r\n      tl.timelineEl.appendChild(nextArrow);\r\n    }\r\n  }\r\n\r\n  // Add the centre line to the horizontal timeline\r\n  function addHorizontalDivider(tl) {\r\n    if (tl.timelineEl.querySelector('.timeline-divider')) {\r\n      tl.timelineEl.querySelector('.timeline-divider').remove();\r\n    }\r\n    const topPosition = tl.items[0].offsetHeight;\r\n    const horizontalDivider = document.createElement('span');\r\n    horizontalDivider.className = 'timeline-divider';\r\n    horizontalDivider.style.top = `${topPosition}px`;\r\n    tl.timelineEl.appendChild(horizontalDivider);\r\n  }\r\n\r\n  // Calculate the new position of the horizontal timeline\r\n  function timelinePosition(tl) {\r\n    const position = tl.items[currentIndex].offsetLeft;\r\n    const str = `translate3d(-${position}px, 0, 0)`;\r\n    tl.scroller.style.webkitTransform = str;\r\n    tl.scroller.style.msTransform = str;\r\n    tl.scroller.style.transform = str;\r\n  }\r\n\r\n  // Make the horizontal timeline slide\r\n  function slideTimeline(tl) {\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    const arrowPrev = tl.timelineEl.querySelector('.timeline-nav-button--prev');\r\n    const arrowNext = tl.timelineEl.querySelector('.timeline-nav-button--next');\r\n    const maxIndex = tl.items.length - tl.settings.visibleItems;\r\n    const moveItems = parseInt(tl.settings.moveItems, 10);\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.addEventListener('click', function(e) {\r\n        e.preventDefault();\r\n        currentIndex = this.classList.contains('timeline-nav-button--next') ? (currentIndex += moveItems) : (currentIndex -= moveItems);\r\n        if (currentIndex === 0 || currentIndex < 0) {\r\n          currentIndex = 0;\r\n          arrowPrev.disabled = true;\r\n          arrowNext.disabled = false;\r\n        } else if (currentIndex === maxIndex || currentIndex > maxIndex) {\r\n          currentIndex = maxIndex;\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = true;\r\n        } else {\r\n          arrowPrev.disabled = false;\r\n          arrowNext.disabled = false;\r\n        }\r\n        timelinePosition(tl);\r\n      });\r\n    });\r\n  }\r\n\r\n  // Set up horizontal timeline\r\n  function setUpHorinzontalTimeline(tl) {\r\n    tl.timelineEl.classList.add('timeline--horizontal');\r\n    setHeightandWidths(tl);\r\n    timelinePosition(tl);\r\n    addNavigation(tl);\r\n    addHorizontalDivider(tl);\r\n    slideTimeline(tl);\r\n  }\r\n\r\n  // Set up vertical timeline\r\n  function setUpVerticalTimeline(tl) {\r\n    let lastVisibleIndex = 0;\r\n    tl.items.forEach((item, i) => {\r\n      item.classList.remove('animated', 'fadeIn');\r\n      if (!isElementInViewport(item, tl.settings.verticalTrigger) && i > 0) {\r\n        item.classList.add('animated');\r\n      } else {\r\n        lastVisibleIndex = i;\r\n      }\r\n      const divider = tl.settings.verticalStartPosition === 'left' ? 1 : 0;\r\n      if (i % 2 === divider && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        item.classList.add('timeline__item--right');\r\n      } else {\r\n        item.classList.add('timeline__item--left');\r\n      }\r\n    });\r\n    for (let i = 0; i < lastVisibleIndex; i += 1) {\r\n      tl.items[i].classList.remove('animated', 'fadeIn');\r\n    }\r\n    // Bring elements into view as the page is scrolled\r\n    window.addEventListener('scroll', () => {\r\n      tl.items.forEach((item) => {\r\n        if (isElementInViewport(item, tl.settings.verticalTrigger)) {\r\n          item.classList.add('fadeIn');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // Reset timelines\r\n  function resetTimelines(tl) {\r\n    currentIndex = 0;\r\n    tl.timelineEl.classList.remove('timeline--horizontal', 'timeline--mobile');\r\n    tl.scroller.removeAttribute('style');\r\n    tl.items.forEach((item) => {\r\n      item.removeAttribute('style');\r\n      item.classList.remove('animated', 'fadeIn', 'timeline__item--left', 'timeline__item--right');\r\n    });\r\n    const navArrows = tl.timelineEl.querySelectorAll('.timeline-nav-button');\r\n    [].forEach.call(navArrows, (arrow) => {\r\n      arrow.parentNode.removeChild(arrow);\r\n    });\r\n  }\r\n\r\n  // Set up the timelines\r\n  function setUpTimelines() {\r\n    timelines.forEach((tl) => {\r\n      tl.timelineEl.style.opacity = 0;\r\n      if (!tl.timelineEl.classList.contains('timeline--loaded')) {\r\n        wrapElements(tl.items);\r\n      }\r\n      resetTimelines(tl);\r\n      if (window.innerWidth <= tl.settings.forceVerticalMode) {\r\n        tl.timelineEl.classList.add('timeline--mobile');\r\n      }\r\n      if (tl.settings.mode === 'horizontal' && window.innerWidth > tl.settings.forceVerticalMode) {\r\n        setUpHorinzontalTimeline(tl);\r\n      } else {\r\n        setUpVerticalTimeline(tl);\r\n      }\r\n      tl.timelineEl.classList.add('timeline--loaded');\r\n      setTimeout(() => {\r\n        tl.timelineEl.style.opacity = 1;\r\n      }, 500);\r\n    });\r\n  }\r\n\r\n  // Initialise the timelines on the page\r\n  setUpTimelines();\r\n\r\n  window.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimer);\r\n    resizeTimer = setTimeout(() => {\r\n      const newWinWidth = window.innerWidth;\r\n      if (newWinWidth !== winWidth) {\r\n        setUpTimelines();\r\n        winWidth = newWinWidth;\r\n      }\r\n    }, 250);\r\n  });\r\n}\r\n\r\nif (window.jQuery) {\r\n  (($) => {\r\n    $.fn.timeline = function(opts) {\r\n      timeline(this, opts);\r\n      return this;\r\n    };\r\n  })(window.jQuery);\r\n}\r\n"]}